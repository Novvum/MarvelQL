//* MARVELQL jq filters

//? Superhero IDs To CSV
["superheroId","name"],(to_entries|.[]| [.value.superheroId,.value.name])|@csv

//! Characters to CSV
["id","name","description","modified", "thumbnail", "marvelURI", "comics", "series", "stories","events", "urls" ],(to_entries | .[] | [.value.id,.value.name, .value.description, .value.modified, ("\(.value.thumbnail.path)/\(.value.thumbnail.extension)"), .value.resourceURI, ([((.value.comics | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/comics/(?<id>[0-9]+)") | .id)))] | [join(", ")] | @csv), ([((.value.series | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/series/(?<id>[0-9]+)") | .id)))] | [join(", ")] | @csv), ([((.value.stories | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/stories/(?<id>[0-9]+)") | .id)))] | [join(", ")] | @csv), ([((.value.events | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/events/(?<id>[0-9]+)") | .id)))] | [join(", ")] | @csv), ([(.value.urls | .[] | .url)] | [join(", ")] | @csv )]) | @csv


//! Event to CSV
["id", "title", "description", "marvelURI", "urls", "modified", "start", "end", "thumbnail", "creators", "characters", "stories", "comics", "series", "next", "previous"], (to_entries | .[] | [(.value.id, .value.title, .value.description, .value.resourceURI, ([(.value.urls | .[] | .url)] | [join(", ")] | @csv ), .value.modified, .value.start, .value.end, ("\(.value.thumbnail.path)/\(.value.thumbnail.extension)"),  ([((.value.creators | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/creators/(?<id>[0-9]+)") | .id)))] | @csv),  ([((.value.characters | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/characters/(?<id>[0-9]+)") | .id)))] | @csv),  ([((.value.stories | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/stories/(?<id>[0-9]+)") | .id)))] | @csv),  ([((.value.comics | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/comics/(?<id>[0-9]+)") | .id)))] | @csv),  ([((.value.series | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/series/(?<id>[0-9]+)") | .id)))] | @csv), (.value.previous // {resourceURI: "http://gateway.marvel.com/v1/public/events/null"} | .resourceURI | capture("http://gateway.marvel.com/v1/public/events/(?<id>[0-9]+)") | .id), (.value.next // {resourceURI: "http://gateway.marvel.com/v1/public/events/null"} | .resourceURI | capture("http://gateway.marvel.com/v1/public/events/(?<id>[0-9]+)") | .id))]) | @csv



//! Series to CSV
["id", "title", "description","resourceURI","urls","startYear","endYear","rating", "type", "modified","thumbnail","comics","stories","events","characters","creators"], (to_entries | .[] | [.value.id, .value.title, (.value.description // ""), (.value.resourceURI | capture("http://gateway.marvel.com/v1/public/series/(?<id>[0-9]+)")| .id), ([(.value.urls | .[] | .url)] | @csv ), .value.startYear, .value.endYear, .value.rating, .value.type, .value.modified, ("\(.value.thumbnail.path)/\(.value.thumbnail.extension)"), ([((.value.comics | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/comics/(?<id>[0-9]+)") | .id)))] | @csv), ([((.value.stories | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/stories/(?<id>[0-9]+)") | .id)))?] | @csv), ([((.value.events | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/events/(?<id>[0-9]+)") | .id)))?] | @csv), ([((.value.characters | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/characters/(?<id>[0-9]+)") | .id)))] | @csv), ([(.value.creators | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/creators/(?<id>[0-9]+)") | .id))] | @csv)]) | @csv



//! Creators to CSV
["id", "firstName", "middleName", "lastName", "suffix", "fullName", "modified", "thumbnail", "resourceURI", "comics", "series", "stories", "events", "urls"], (to_entries | .[] | [.value.id, .value.firstName, .value.middleName, .value.lastName, .value.suffix, .value.fullName, .value.modified, ("\(.value.thumbnail.path)/\(.value.thumbnail.extension)"), (.value.resourceURI | capture("http://gateway.marvel.com/v1/public/comics/(?<id>[0-9]+)") | .id), ([((.value.comics | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/comics/(?<id>[0-9]+)") | .id)))] | @csv), ([((.value.series | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/series/(?<id>[0-9]+)") | .id)))] | @csv), ([((.value.stories | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/stories/(?<id>[0-9]+)") | .id)))] | @csv), ([((.value.events | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/events/(?<id>[0-9]+)") | .id)))?] | @csv), ([(.value.urls | .[] | .url)] | @csv )]) | @csv



//! Comics to CSV
 ["id", "digitalId", "title", "issueNumber", "variantDescription", "description", "modified", "isbn", "upc", "diamondCode", "ean", "issn", "format", "pageCount", "blurb", "resourceURI", "urls", "series", "variants", "collections", "collectedIssues", "onsaleDate", "focDate", "digitalPurchaseDate", "unlimitedDate", "digitalPurchasePrice", "printPrice", "thumbnail", "images", "creators", "characters", "stories", "events"], (to_entries | .[] | [.value.id, .value.digitalId, .value.title, .value.issueNumber, .value.variantDescription, .value.description, .value.modified, .value.isbn, .value.upc, .value.diamondCode, .value.ean, .value.issn, .value.format, .value.pageCount, (.value.textObjects | .[] | .text), (.value.resourceURI | capture("http://gateway.marvel.com/v1/public/series/(?<id>[0-9]+)")| .id),(.value.urls | .[] | .url), (.value.series.resourceURI | capture("http://gateway.marvel.com/v1/public/series/(?<id>[0-9]+)") | .id), ([((.value.variants | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/comics/(?<id>[0-9]+)") | .id)))] | @csv), ([((.value.collections | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/comics/(?<id>[0-9]+)") | .id)))] | @csv), ([((.value.collectedIssues | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/comics/(?<id>[0-9]+)") | .id)))] | @csv), (.value.dates | .[] | if .type == "onsaleDate" then .date else "" end), (.value.dates | .[] | if .type == "focDate" then .date else "" end), (.value.dates | .[] | if .type == "onsaleDate" then .date else "" end), (.value.dates | .[] | if .type == "digitalPurchaseDate" then .date else "" end), (.value.dates | .[] | if .type == "unlimitedDate" then .date else "" end), (.value.prices | .[] | if .type == "digitalPurchasePrice" then .price else "" end), (.value.prices | .[] | if .type == "printPrice" then .price else "" end), ("\(.value.thumbnail.path)/\(.value.thumbnail.extension)"), (.value.images | .[] |  "\(.path)/\(.extension)"), ([(.value.creators | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/creators/(?<id>[0-9]+)") | .id))] | @csv), ([(.value.characters | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/characters/(?<id>[0-9]+)") | .id))] | @csv), ([(.value.stories | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/stories/(?<id>[0-9]+)") | .id))] | @csv), ([(.value.events | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/events/(?<id>[0-9]+)") | .id))] | @csv)]) | @csv


//! Stories to CSV
["id", "title", "description", "resourceURI", "type", "modified", "creators", "characters", "series", "comics", "events", "originalIssue"], (to_entries | .[] | [.value.id, .value.title, .value.description, (.value.resourceURI | capture("http://gateway.marvel.com/v1/public/series/(?<id>[0-9]+)")| .id), .value.type, .value.modified, ([(.value.creators | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/creators/(?<id>[0-9]+)") | .id))] | @csv), ([(.value.characters | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/characters/(?<id>[0-9]+)") | .id))] | @csv), ([(.value.series | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/series/(?<id>[0-9]+)") | .id))] | @csv), ([(.value.comics | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/comics/(?<id>[0-9]+)") | .id))] | @csv), ([(.value.events | .items | .[] | (.resourceURI | capture("http://gateway.marvel.com/v1/public/events/(?<id>[0-9]+)") | .id))] | @csv), if .value.originalIssue != null then (.value.originalIssue.resourceURI | capture("http://gateway.marvel.com/v1/public/comics/(?<id>[0-9]+)") | .id) else "" end]) | @csv

 